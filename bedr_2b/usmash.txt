if state_type = "stand" || state_type ="run"
{
	hspeed = 0;
	state_type = "attack";
	attack_type = "usmash";
	image_speed = 0;
	sprite_index = usmash_sprite;
	image_index=0;
	timer = 0;
	time = 48;
	timer_speed=1;
	charge_frame=1;
	visualcount = 0;
}
if timer < time
{
	state_type = "attack";		 
	switch ( timer )
	{
		case 4: image_index = 1; break;
		case 8: image_index = 2; break;
		case 12: image_index = 3; break;
		case 16:
			image_index = 4;
			sound_play(summon_pod);
			if random(2) < 1
				sound_play(pod_move1);
		break;
		case 20:
			image_index = 5;
			chomp.sprite_index = pod_usmash_sprite;
			chomp.image_index = 0;
		break;
		case 22: chomp.image_index = 1; break;
		case 24: image_index = 6; chomp.image_index = 2; break;
		case 26: chomp.image_index = 3; break;
		case 28: image_index = 7; chomp.image_index = 4; break;
		case 30: chomp.image_index = 5; break;
		case 31: chomp.image_index = 6; break;
		case 32: image_index = 8; chomp.image_index = 7; break;
		case 36: image_index = 9; chomp.image_index = 6; break;
		case 38: chomp.image_index = 5; break;
		case 40: image_index = 10; chomp.image_index = 4; break;
		case 42: chomp.image_index = 3; break;
		case 44: image_index = 11; chomp.image_index = 2; break;
		case 46: chomp.image_index = 0; break;
		case 47:
			chomp.sprite_index = pod_idle_sprite;
			chomp.image_speed = 0.1;
			chomp.image_index = 0;
		break;
	}
	if timer = 8
		instance_create(x+13-facing*26,y-18,obj_spark_effect);
		
	if timer > 1
	{
		if podstation = 0
		{
			if facing = 0
				chomp.x = x + 25;
			else
				chomp.x = x - 25;
		}
		chomp.y = y - 15;
		pody = chomp.y;
	}
	if timer = 24
	{
		sound_play(shocksound1);
		visualUS = create_spark(0,0,self.id);
		if facing = 0
			visualUS.x = chomp.x - 2;
		else
			visualUS.x = chomp.x + 2;
		visualUS.sprite_index = usmash_visual_sprite;
		visualUS.facing = facing;
		visualUS.image_alpha = 1;
		visualUS.image_speed = 0.3;
		visualUS.image_xscale = self.xsize*size;
		visualUS.image_yscale = self.ysize*size;
		visualUS.snap = self.id;
	}
	if instance_exists(visualUS) && visualUS.image_index = 3 && visualcount <= 0
	{
		beam = create_projectile (14,65+facing*50,5.6,7.85,19,10,shock2,obj_spark_hit2,0.75,1.75,0,0,self.id,60,no_script);
		if facing = 0
			beam.x = chomp.x - 2;
		else
			beam.x = chomp.x + 2;
		beam.y = chomp.y;
		beam.charge_dmg = 1;
		beam.charge_kb = 1;
		visualcount += 1;
	}
}
			
if timer >= time-1 && state_type != "flinch" && state_type != "air_flinch"
{
    attack_type = "none";
    state_type = "stand";
    timer = 0;
    time =-1;
	if ( instance_exists(beam) )
	{
		with (beam)
			instance_destroy();
	}
}