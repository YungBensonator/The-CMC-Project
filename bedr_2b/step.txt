if (air = 0)
{
	sbtemp = 0;
	can_hover = 1;
}
if cantuseb > 0
	cantuseb -=1
if cantusedownb > 0
	cantusedownb -=1

if sprite_index = stand_sprite || sprite_index = crouch_sprite || sprite_index = run_sprite
	image_speed = 0.2;
if sprite_index = walk_sprite
	mask_index = sprite_index;

if state_type = "crouch" and sprite_index = crouch_sprite and image_index >=12
	image_index = 4;
if state_type = "crouch"
{
	if notcrouch = 1
	{
		image_index = 0
		notcrouch = 0
	}
}
if state_type = "respawn"
	podstation = 0;
if (state_type = "flinch" || state_type = "air_flinch")
{
	if ( instance_exists(visualTaunt) )
	{
		with (visualTaunt)
			instance_destroy();
	}
	if ( instance_exists(visuaBoom) )
	{
		with (visuaBoom)
			instance_destroy();
	}
	if ( instance_exists(blade) )
	{
		with (blade)
			instance_destroy();
	}
	if ( instance_exists(visualB) )
	{
		with (visualB)
			instance_destroy();
	}
	if ( instance_exists(visualUS) )
	{
		with (visualUS)
			instance_destroy();
	}
	if ( instance_exists(beam) )
	{
		with (beam)
			instance_destroy();
	}
	if podstation != 0
	{
		chomp.sprite_index = pod_idle_sprite;
		chomp.image_speed = 0.1;
		chomp.image_index = 0;
	}
}
if (!instance_exists(sword))
{
	with(visualJB)
		instance_destroy();
}

if (chomp == 0 || (chomp > 0 && !instance_exists(chomp)))
{
	chomp = instance_create(x, y, obj_spark);
	chomp.number=-number;
	chomp.depth = depth + 1;
	chomp.image_xscale = 0.5;
	chomp.image_yscale = 0.5;
	chomp.sprite_index = pod_idle_sprite;
	chomp.image_speed = 0.1;
	chomp.image_index = 0;
	chomp.keepmain = keepmain;
	chomp.script = char_custom3;
}

if (podstation != 0)
{
	chomp.x = podx;
	chomp.y = pody;
}
    
chomp_timer += 1;
if (chomp_timer >= 20)
{
	chomp_xo = -3 + random(6);
	chomp_yo = -3 + random(6);
	chomp_timer = 0;
}
with (chomp)
{
	if (image_index == 6)
		image_index = 0;
	visible = 1;
	if (podstation == 0)
	{
		x = (x * 18 + other.x - 17 * (1 - other.facing * 2)) / 19;
		y = (y * 23 + other.y - 16) / 24;
	}
	image_xscale = 0.4 * (1 - other.facing * 2);
	image_yscale = 0.4;
	depth = other.depth + 1;
}

if (podstation = 0 && movedown != 1)
{
	if (attack_type = "none" && state_type = "jump" and holdjump = 1 && vspeed = 0 && can_hover > 0 && hover_time > 0)
	{
		sprite_index = hover_sprite;
		image_speed = 0.125;
		if sprite_index = hover_sprite and image_index >= 9
			image_index = 7;
		vspeed = 0.3;
		
		chomp.sprite_index = pod_idle_sprite;
		chomp.image_speed = 0.1;
		chomp.image_index = 0;
		if facing = 0
			chomp.x = x - 5.5;
		else
			chomp.x = x + 5.5;
		chomp.y = y - 27.2;
	}
}
else
	can_hover = 0

if global.gs_form[number-1] = 0
	if (attack_type = "none" && (state_type == "jump" || state_type = "air_flinch" || state_type = "air_dodge") && podstation = 0)
		can_hover = 1;
	else
		can_hover = 0;